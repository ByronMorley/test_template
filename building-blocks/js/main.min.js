function checkNavTabs(a){var b=a.find(".nav-link"),c=a.find(".tab-pane");if(null===localStorage.getItem("tabs"))console.log("null"),b.first().addClass("show active"),c.first().addClass("show active"),localStorage.setItem("tabs",0);else{var d=localStorage.getItem("tabs");console.log(d);var e=b.eq(d);e.addClass("show active"),$(e.attr("href")).addClass("show active")}}function postHtmlData(a){$.post("building-blocks/php/save.php",{content:$(a).prop("outerHTML")}).done(function(){$(".tabloid_download").first().clone()[0].click()})}function renderContent(a){return $("<html>").append($("<head>").append($("<meta>").attr("charset","UTF-8"),$("<meta>").attr({"http-equiv":"Content-Type",content:"text/html; charset=UTF-8"}),$("<link>").attr({href:"../css/pdf.css",type:"text/css",media:"screen",rel:"stylesheet"})),$("<body>").append($("<div>").addClass("pdf-container").append($("<h1>").text($("#pdf-site-info").attr("root")),$("<h2>").text($("#pdf-site-info").attr("page")),a.html())))}function convertImages(a){var b=a.find("img"),c=b.length,d=0;b.each(function(){var b=$(this),e=b.attr("src");toDataURL(e,function(e){d++,b.attr("src",e),d>=c&&postHtmlData(renderContent(a))})}),0==c&&postHtmlData(renderContent(a))}function clean_html(a){var b="audio, .pagination-block, .you-tube-block, .video-block, .link-block";return a.find(b).each(function(){$(this).remove()}),a}function toDataURL(a,b,c){var d=new Image;d.crossOrigin="Anonymous",d.onload=function(){var a,d=document.createElement("CANVAS"),e=d.getContext("2d");d.height=this.naturalHeight,d.width=this.naturalWidth,e.drawImage(this,0,0),a=d.toDataURL(c),b(a)},d.src=a,(d.complete||void 0===d.complete)&&(d.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",d.src=a)}!function(a,b,c,d){var e={onInit:function(){},onChange:function(){},afterChange:function(){}},f=function(b,c){this.paginationList=a(b),this.liElems=this.paginationList.find("li"),this.settings=a.extend({},e,c,a(b).data("aqua-opts")),this.init()};f.prototype={init:function(){var a=[];this.settings.onInit(),this.addStartDots=!1,this.addEndDots=!1,this.liElems.map(function(){a.push(new g(this))}),this.links=a,this.mutLinks=a,this.current=this.getCurrent(),console.log(this.current),this.originalLength=this.links.length,this.setup(),this.render(this.links)},setup:function(){var a=this.current.index,b=this;b.links.map(function(c){Math.abs(c.index-a)>=2&&c.index>0&&c.index<b.originalLength-1&&(c.active=!1)}),a>2&&(this.addStartDots=!0),a<this.links.length-3&&(this.addEndDots=!0)},getNextLink:function(){return this.current.index==this.originalLength-1?this.current.atag.href:this.mutLinks[this.current.index+1].atag.href},getPrevLink:function(){return 0==this.current.index?this.current.atag.href:this.mutLinks[this.current.index-1].atag.href},nextLink:function(){return this.createLink("page-item","page-link",this.getNextLink(),"&#8594;")},prevLink:function(){return this.createLink("page-item","page-link",this.getPrevLink(),"&#8592;")},nextSectionLink:function(){return this.createLink("page-item","page-link","","&#8677;")},prevSectionLink:function(){return this.createLink("page-item","page-link","","&#8676;")},startDots:function(a){return a.createLink("page-item start_dot","page-link","","...")},endDots:function(a){return a.createLink("page-item end_dot","page-link","","...")},getCurrent:function(){var a;return this.mutLinks.map(function(b){b.selected&&(a=b)}),a},render:function(a){var b=(this.current.index,this);b.paginationList.empty(),b.paginationList.append(b.prevLink());var c=0;a.map(function(d){1==c&&b.addStartDots&&b.paginationList.append(b.startDots(b)),d.active&&b.paginationList.append(b.renderLink(d)),c==a.length-2&&b.addEndDots&&b.paginationList.append(b.endDots(b)),c++}),b.paginationList.append(b.nextLink())},renderLink:function(b){return a("<li>").addClass(b.className).append(a("<a>").addClass(b.atag.className).attr("href",b.atag.href).html(b.atag.innerHtml))},createLink:function(b,c,d,e){return a("<li>").addClass(b).append(a("<a>").addClass(c).attr("href",d).html(e))}};var g=function(b){this.classList=b.classList,this.className=this.classList.value,this.selected=b.classList.contains("active"),this.atag=new h(b.querySelector("a")),this.index=a(b).index(),this.active=!0},h=function(a){this.className=a.classList.value,this.href=a.getAttribute("href"),this.innerHtml=a.innerHTML};a.fn.paginator=function(b){return this.each(function(){a.data(this,"paginator")||a.data(this,"paginator",new f(this,b))})}}(jQuery,window,document),function(a,b,c){"use strict";var d="hades_audio_player",e=477171;a.hades_audio_player=function(b,c,e){var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u={update_speed:1e3,solo:!1,play_all:!1},v=this,w="hades-audio-player-"+e,x=!1,y=!0,z=[],A=!1;v.settings={};var B=a(b),b=b,C=B.data(d+"-opts");v.init=function(){v.settings=a.extend({},u,c,C),f=v.settings,f.play_all=B.attr("play"),console.log("initialised plugin "+d+" -- "+e),B.attr("id",w),D()},v.stop_all=function(){0!=a(".audio-block").length&&a(".audio-block").each(function(){void 0!=a(this).data("hades_audio_player")&&a(this).data("hades_audio_player").stop()})},v.stop=function(){var a=i.find(".glyphicon");_(a,"glyphicon-pause","glyphicon-play"),V()},v.play_pause=function(a){A&&P(a)},v.volume=function(a){A&&O(a)};var D=function(){H(),A&&(F(),G())},E=function(){if(s.currentTime>=s.duration)if(t.id==z.length-1)N();else if(f.play_all){var a;v.stop_all(),a=t.id+1,T(a)}else N();else M(s.currentTime)},F=function(){k.volume_hover(),l.volume_hover(),j.volume_hover(),i.button_click(),j.button_click(),o.vertical_track(),m.horizontal_track(),q.change_track(),r.change_track()},G=function(){J(),$()},H=function(){I(),k=B.find(".audio-block-volume-hover-pad"),l=B.find(".audio-block-volume-meter"),j=B.find(".audio-block-volume-button"),i=B.find(".audio-block-play"),m=B.find(".audio-block-track"),n=B.find(".audio-block-track-line"),o=B.find(".audio-block-volume-track"),p=B.find(".audio-block-volume-track-line"),q=B.find(".glyphicon-step-backward"),r=B.find(".glyphicon-step-forward")},I=function(){if(v.settings.solo)A=!0,K(Z(0,B.find("source").attr("src"),!1,!1));else{var b=B.find(".audio-text");b.each(function(b){var c=a(this),d=(c.find("source").attr("src"),c.attr("avatar"));z.push(Z(b,c.find("source").attr("src"),!1,0!=d.length&&d))}),z.length>0?(console.log(z.length+1+" audio files found"),A=!0,K(z[0])):(console.log("no audio found"),A=!1)}},J=function(){r.show(),q.show(),0==t.id&&q.hide(),t.id==z.length-1&&r.hide()},K=function(a){t=a;for(var b=0;b<z.length;b++)z[b].current=!1,console.log(z[b].avatar);a.current=!0,0!=a.avatar&&L(a),s=new Audio(a.src)},L=function(b){var c=B.find(".bottom-wrapper");c.find(".avatar").remove(),c.prepend(a("<div>").addClass("avatar col-md-6 col-xs-12 "+b.alignment).append(a("<img>").attr("src",b.avatar)))},M=function(a){var b=a/s.duration*100;b>100?n.css("width","100%"):n.css("width",b+"%")},N=function(){s.currentTime=0,M(0),V(),_(i.find(".glyphicon"),"glyphicon-pause","glyphicon-play")},O=function(a){var b=a.find(".glyphicon");y?(y=!1,_(b,"glyphicon-volume-up","glyphicon-volume-off"),W()):(y=!0,_(b,"glyphicon-volume-off","glyphicon-volume-up"),X())},P=function(a){var b=a.find(".glyphicon");x?(_(b,"glyphicon-pause","glyphicon-play"),V()):(v.stop_all(),_(b,"glyphicon-play","glyphicon-pause"),U())},Q=function(a){s.currentTime=s.duration*a,E()},R=function(){var a=100*s.volume;p.css("height",a+"%")},S=function(){return setInterval(function(){E()},f.update_speed)},T=function(a){var b=i.find(".glyphicon");_(b,"glyphicon-pause","glyphicon-play"),V(),K(z[a]),J();var c=B.find(".audio-text");c.removeClass("current"),c.eq(a).addClass("current"),_(b,"glyphicon-play","glyphicon-pause"),U()},U=function(){x=!0,s.play(),g=S()},V=function(){x=!1,s.pause(),clearInterval(g)},W=function(){h=s.volume,s.volume=0,R()},X=function(){s.volume=h,R()},Y=function(a){y=a>0,s.volume=a,R()},Z=function(a,b,c,d){a=parseInt(a);var e=a%2?"right":"left";return{id:a,src:b,current:c,avatar:d,alignment:e}},$=function(){var a=j.width()/2+15-l.width()/2;l.css("margin-right",a+"px")},_=function(a,b,c){a.removeClass(b),a.addClass(c)};a.fn.change_track=function(){a(this).each(function(){a(this).on("click",function(){var b;v.stop_all(),a(this).hasClass("glyphicon-step-backward")&&(console.log("back"),b=t.id-1,T(b)),a(this).hasClass("glyphicon-step-forward")&&(console.log("forward"),b=t.id+1,T(b))})})},a.fn.volume_hover=function(){a(this).each(function(){a(this).on("mouseover",function(){B.find(".audio-block-volume-meter").show()}).on("mouseleave",function(){B.find(".audio-block-volume-meter").hide()})})},a.fn.button_click=function(){a(this).on("click",function(){var b=a(this).attr("action");a("#"+w).data("hades_audio_player")[b](a(this))})},a.fn.vertical_track=function(){a(this).on("click",function(b){var c=a(this).offset(),d=b.pageY-c.top,e=1-d/a(this).height();e=e>.9?1:e,e=e<.1?0:e,Y(e)})},a.fn.horizontal_track=function(){a(this).on("click",function(b){var c=a(this).offset(),d=b.pageX-c.left,e=d/a(this).width();Q(e)})},a(window).on("resize",function(){$()}),v.init()},a.fn.hades_audio_player=function(b){return this.each(function(){if(void 0==a(this).data(d)){var c=new a.hades_audio_player(this,b,(e++));a(this).data(d,c)}})}}(jQuery,document,window),$(document).ready(function(){$(".tab-block").each(function(){checkNavTabs($(this))}),$(".nav-link").on("click",function(){localStorage.setItem("tabs",$(this).parent().index())})}),$(document).ready(function(){$(".tabloid_download").on("click",function(a){a.preventDefault(),convert_to_pdf()})});var printAll=function(a,b){a.preventDefault();var c={id:b,url:window.location.href},d=window.location.href+"/printAll";$.ajax({type:"POST",url:d,data:c,success:function(a){$("#open-print-"+b).removeClass("disabled")}})},convert_to_pdf=function(){console.log("convert to pdf");var a=get_content();console.log(a.html()),clean_html(a);var b=!1;b?convertImages(a):postHtmlData(renderContent(a))},get_content=function(){return $("<div>").append($(".block").clone())};
//# sourceMappingURL=main.min.js.map